services:
  modelgate:
    build: .
    container_name: modelgate
    ports:
      - "8010:8010"
    env_file:
      - .env.example
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "python -c \"import urllib.request; urllib.request.urlopen('http://127.0.0.1:8010/health').read(); print('ok')\""]
      interval: 10s
      timeout: 3s
      retries: 10
